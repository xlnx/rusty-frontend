<a-scene embedded antialias="true" shadow="type: pcfsoft" light="defaultLightsEnabled: false">

	<!-- <a-entity web-socket-logger web-socket="host: 10.180.161.107; port: 8899" export="socket=web-socket"></a-entity> -->

	<a-entity id="city-editor" room export="export: city-editor=[el]">

		<a-entity light="type: ambient; color: #BBB; intensity: 0.4"></a-entity>
		<a-entity light="type: directional; color: #FFF; intensity: 0.8" position="-0.5 1 1"></a-entity>

		<!-- <a-light position="0 10 0" color="white" type="point"></a-light> -->
		<!-- <a-box position="2 3 -10" billboard></a-box> -->
		<a-sky color="#ECECEC"></a-sky>
		<!-- <a-box position="-2 3 -10" color="blue"></a-box> -->

		<!-- <a-entity position="2 2 -10" button="text: Building_Bar" billboard></a-entity> -->

		<a-entity class="ground" terrain="blockCnt: 8; worldWidth: 200; raycaster: #main-controller"
			export="export: terrain">
		</a-entity>

		<a-entity menu>
			<a-entity button="text: building; width: 3; fontSize: 3" position="2 4 -10"
				router-switch="router: #main-controller; event: int-click; value: building"></a-entity>
			<a-entity button="text: road; width: 3; fontSize: 3" position="2 3 -10"
				router-switch="router: #main-controller; event: int-click; value: road"></a-entity>
			<a-entity button="text: preview; width: 3; fontSize: 3" position="2 2 -10"
				router-switch="router: #main-controller; event: int-click; value: preview"></a-entity>
			<a-entity button="text: morph; width: 3; fontSize: 3" position="2 1 -10"
				router-switch="router: #main-controller; event: int-click; value: morph"></a-entity>
			<!-- <a-entity button="text: ; width: 3; fontSize: 3" position="2 0 -10"></a-entity> -->
		</a-entity>

	</a-entity>

	<a-entity building-manager export="export: building-manager"></a-entity>
	<a-entity basemap export="export: basemap"></a-entity>

	<a-camera position="0 1 0">

		<a-entity id="splash_main" splash="dst: #city-editor" export="export: splash=[el]"></a-entity>

		<!-- state machine -->
		<!-- <a-entity id="main-controller" router="active: preview" export="export: router">
		</a-entity> -->

	</a-camera>

	<a-entity main id="main-controller" router="active: preview" intergrated-raycaster="objects: .ground"
		export="export: terrain-raycaster=raycaster, router, main">

		<a-entity router-item="building" building-state></a-entity>
		<a-entity router-item="road" road-state></a-entity>
		<a-entity router-item="preview" preview-state></a-entity>
		<a-entity router-item="morph" morph-state></a-entity>
		<!-- <a-entity router-item="preview" building-state></a-entity> -->
	</a-entity>

	<a-entity intergrated-raycaster></a-entity>

	<!-- <a-entity main intergrated-raycaster>
	</a-entity> -->

</a-scene>